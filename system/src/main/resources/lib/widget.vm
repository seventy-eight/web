#macro(widget $name $title $containerId)
<div class="header widget" style="width: 99%;">$title</div>
<div id="widgetContainer$containerId" style="width: 100%;">

</div>

<script type="text/javascript">

    $(function() {
        $.ajax({
            type: "GET",
            url: "/widgets/get/$name/view",
            success: function(data, textStatus, jqxhr){$('#widgetContainer$containerId').html(data)},
            error: function(ajax, text, error) {alert(error)}
        });
    });

</script>
#end

#macro(menu $menu)

    <script>
        $(function() {
            $( "#mainmenu" ).menu(/*{ position: { my: "top", at: "bottom" } }*/);
        });
    </script>
<style>
    .ui-menu { width: 150px; }
</style>

    <ul id="mainmenu">
        <li><a href="#"><img src="/resource/file-2/file" style="width: 75px"></a>
            <ul>
            #foreach($key in $menu.getHeaderKeys())
                <li><a href="#">$key</a>
                    <ul>
                        #foreach($item in $menu.getMenuItems($key))
                            <li><a href="$item.getUrl()">$item.getTitle()</a></li>
                        #end
                    </ul>
                </li>
            #end
            </ul>
        </li>
    </ul>
#end

#macro(comments $resource)
<div class="headerContrast" style="width: 100%; min-width: inherit">Comments</div>
<div id="commentsContainer" style="min-width: inherit">

</div>

<script type="text/javascript">

    $(function() {
        $.ajax({
            type: "GET",
            url: "/resource/$resource.getIdentifier()/getComments",
            //success: function(data, textStatus, jqxhr){$('#commentsContainer').html(data)},
            success: function(data, textStatus, jqxhr){addComments(data)},
            error: function(ajax, text, error) {alert(error)}
        });
    });

    function addComments(data) {
        var json = eval(data);

        for( i = 0 ; i < json.length ; i++ ) {
            //$(json[i]).hide().insertBefore("#commentsContainer").fadeIn(600);
            $("#commentsContainer").append(json[i] + "<br>");
        }
    }

</script>
#end