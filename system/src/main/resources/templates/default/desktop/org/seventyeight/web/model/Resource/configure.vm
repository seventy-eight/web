
#set( $descriptor = $item.getDescriptor() )

#foreach( $action in $item.getLayoutableHavingTemplate( $request.getTheme(), $request.getPlatform(), "top.vm" ) )
<tr>
    <td colspan="2" class="nothing" style=";padding: 0px">
        #render( $action "top" false "" $item true )
    </td>
</tr>
#end

<span align="center" style="font-size: 18px;font-weight: bold">Configuring $item.getDisplayName()</span>

<form action="configurationSubmit" method="post" id="configure" name="configure" enctype="application/x-www-form-urlencoded" accept-charset="UTF-8" onsubmit="Utils.addJsonElement( this );">

<table style="width: 100%">
    <tr>
        <!-- Menus -->
        <td style="width: 200px; text-align: center; vertical-align: top">
            <a href="#" class="button enabledButton" onclick="activate('$item.getType()-config', this)">$item.getDescriptor().getDisplayName()</a>
            <a href="#" class="button" onclick="activate('access-config', this)">Access</a>

            #set( $elist = $item.getConfiguredExtensions() )
            #foreach( $extension in $elist )
                <a href="#" class="button" onclick="activate('$extension.getDescriptor().getJsonId()-config', this)">$extension.getDescriptor().getDisplayName()</a>
            #end
        </td>

        <td style="width: auto; vertical-align: top" name="OUTER">
            <div id="$item.getType()-config" style="display: block" class="configurationDiv rootConfiguration">
                <table style="width:100%">
                    <tr>
                        <td>
                            Title
                        </td>
                        <td>
                            <input style="width:100%" type="text" name="title" value="$item.getTitle()" class="configurationDiv rootConfiguration">
                        </td>
                    </tr>
                    #render( $item "config" )
                </table>
            </div>

            <div id="access-config" style="display: none" class="configurationDiv rootConfiguration">
                #render( $item "accessConfig" true )
            </div>

            <div name="extensions">
                #foreach( $extension in $elist )
                    <div id="$extension.getDescriptor().getJsonId()-config" style="display: none" class="configurationDiv rootConfiguration">
                        <input type="hidden" name="class" value="$extension.getId()" />
                        <table>
                            #render( $extension "config" )
                        </table>
                    </div>
                #end

            </div>
        </td>
    </tr>

    <tr>
        <td colspan="2" align="center"><input type="submit" value="Save"></td>
    </tr>
</table>

</form>


<script type="text/javascript">

    var lastConfiguration;
    var lastButton;
    function activate(id, button) {

        var e = document.getElementById(id);
        $(e).show();
        $('.configurationDiv').not("#"+id).hide();

        $('.button').not(button).removeClass('enabledButton');
        $(button).addClass('enabledButton');

    }

</script>
